<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>service: Go Coverage Report</title>
    <style>
      body {
        background: black;
        color: rgb(80, 80, 80);
      }
      body,
      pre,
      #legend span {
        font-family: Menlo, monospace;
        font-weight: bold;
      }
      #topbar {
        background: black;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 42px;
        border-bottom: 1px solid rgb(80, 80, 80);
      }
      #content {
        margin-top: 50px;
      }
      #nav,
      #legend {
        float: left;
        margin-left: 10px;
      }
      #legend {
        margin-top: 12px;
      }
      #nav {
        margin-top: 10px;
      }
      #legend span {
        margin: 0 5px;
      }
      .cov0 {
        color: rgb(192, 0, 0);
      }
      .cov1 {
        color: rgb(128, 128, 128);
      }
      .cov2 {
        color: rgb(116, 140, 131);
      }
      .cov3 {
        color: rgb(104, 152, 134);
      }
      .cov4 {
        color: rgb(92, 164, 137);
      }
      .cov5 {
        color: rgb(80, 176, 140);
      }
      .cov6 {
        color: rgb(68, 188, 143);
      }
      .cov7 {
        color: rgb(56, 200, 146);
      }
      .cov8 {
        color: rgb(44, 212, 149);
      }
      .cov9 {
        color: rgb(32, 224, 152);
      }
      .cov10 {
        color: rgb(20, 236, 155);
      }
    </style>
  </head>
  <body>
    <div id="topbar">
      <div id="nav">
        <select id="files">
          <option value="file0">
            github.com/EdlanioJ/kbu/payments/data/service/account-transaction.go
            (100.0%)
          </option>

          <option value="file1">
            github.com/EdlanioJ/kbu/payments/data/service/service-transaction.go
            (100.0%)
          </option>

          <option value="file2">
            github.com/EdlanioJ/kbu/payments/data/service/store-transaction.go
            (100.0%)
          </option>

          <option value="file3">
            github.com/EdlanioJ/kbu/payments/data/service/transaction.go
            (100.0%)
          </option>

          <option value="file4">
            github.com/EdlanioJ/kbu/payments/infra/db/gorm/repository/account.go
            (100.0%)
          </option>

          <option value="file5">
            github.com/EdlanioJ/kbu/payments/infra/db/gorm/repository/service-price.go
            (100.0%)
          </option>

          <option value="file6">
            github.com/EdlanioJ/kbu/payments/infra/db/gorm/repository/service.go
            (100.0%)
          </option>

          <option value="file7">
            github.com/EdlanioJ/kbu/payments/infra/db/gorm/repository/store.go
            (100.0%)
          </option>

          <option value="file8">
            github.com/EdlanioJ/kbu/payments/infra/db/gorm/repository/transaction.go
            (100.0%)
          </option>
        </select>
      </div>
      <div id="legend">
        <span>not tracked</span>

        <span class="cov0">not covered</span>
        <span class="cov8">covered</span>
      </div>
    </div>
    <div id="content">
      <pre class="file" id="file0" style="display: none">package service

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/EdlanioJ/kbu/payments/domain/repository"
)

type AccountTransactionService struct {
        TransactionRepository repository.TransactionRepository
        AccountRepository     repository.AccountRepository
}

func NewAccountTransactionService(TransactionRepository repository.TransactionRepository, AccountRepository repository.AccountRepository) *AccountTransactionService <span class="cov8" title="1">{
        return &amp;AccountTransactionService{
                TransactionRepository: TransactionRepository,
                AccountRepository:     AccountRepository,
        }
}</span>

func (t *AccountTransactionService) RegisterAccountTransaction(fromAccountId string, toAccountId string, amount float64, currency string) (*entity.Transaction, error) <span class="cov8" title="1">{
        accountFrom, err := t.AccountRepository.Find(fromAccountId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">accountTo, err := t.AccountRepository.Find(toAccountId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = accountFrom.Withdow(amount)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := entity.NewTransaction(accountFrom, accountTo, nil, nil, amount, currency)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = t.TransactionRepository.Register(transaction)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = t.AccountRepository.Save(accountFrom)
        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *AccountTransactionService) FindAllByAccountTo(accountId string, pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        _, err := t.AccountRepository.Find(accountId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := t.TransactionRepository.FindByAccountToId(accountId, pag)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *AccountTransactionService) FindOneByAccount(accountId string, transactionId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        _, err := t.AccountRepository.Find(accountId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := t.TransactionRepository.FindOneByAccount(transactionId, accountId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}
</pre>

      <pre class="file" id="file1" style="display: none">package service

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/EdlanioJ/kbu/payments/domain/repository"
)

type ServiceTransactionService struct {
        AccountRepository      repository.AccountRepository
        TransactionRepository  repository.TransactionRepository
        ServiceRepository      repository.ServiceRepository
        ServicePriceRepository repository.ServicePriceRepository
}

func NewServiceTransactionService(
        AccountRepository repository.AccountRepository,
        ServicePriceRepository repository.ServicePriceRepository,
        ServiceRepository repository.ServiceRepository,
        TransactionRepository repository.TransactionRepository,
) *ServiceTransactionService <span class="cov8" title="1">{
        return &amp;ServiceTransactionService{
                AccountRepository:      AccountRepository,
                TransactionRepository:  TransactionRepository,
                ServiceRepository:      ServiceRepository,
                ServicePriceRepository: ServicePriceRepository,
        }
}</span>

func (t *ServiceTransactionService) RegisterServiceTransaction(accountFromId string, serviceId string, servicePriceId string, amount float64, currency string) (*entity.Transaction, error) <span class="cov8" title="1">{
        var finalAmount float64

        if servicePriceId == "" &amp;&amp; amount == 0 </span><span class="cov8" title="1">{
                return nil, errors.New("missing amount or servicePriceId")
        }</span>

        <span class="cov8" title="1">accountFrom, err := t.AccountRepository.Find(accountFromId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">service, err := t.ServiceRepository.FindServiceByIdAndStatus(serviceId, entity.ServiceActive)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">if servicePriceId != "" </span><span class="cov8" title="1">{
                servicePrice, err := t.ServicePriceRepository.Find(servicePriceId)

                if err != nil </span><span class="cov8" title="1">{
                        return nil, errors.New(err.Error())
                }</span>

                <span class="cov8" title="1">finalAmount = servicePrice.Amount</span>
        } else<span class="cov8" title="1"> {
                finalAmount = amount
        }</span>

        <span class="cov8" title="1">err = accountFrom.Withdow(finalAmount)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := entity.NewTransaction(accountFrom, nil, service, nil, finalAmount, currency)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = t.TransactionRepository.Register(transaction)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = t.AccountRepository.Save(accountFrom)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transaction, nil</span>
}
func (t *ServiceTransactionService) FindAllByServiceId(serviceId string, pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        _, err := t.ServiceRepository.Find(serviceId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := t.TransactionRepository.FindByServiceId(serviceId, pag)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *ServiceTransactionService) FindOneByService(serviceId string, transactionId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        _, err := t.ServiceRepository.Find(serviceId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := t.TransactionRepository.FindOneByService(transactionId, serviceId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transaction, nil</span>
}
</pre>

      <pre class="file" id="file2" style="display: none">package service

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/EdlanioJ/kbu/payments/domain/repository"
)

type StoreTransactionService struct {
        AccountRepository     repository.AccountRepository
        StoreRepository       repository.StoreRepository
        TransactionRepository repository.TransactionRepository
}

func NewStoreTransactionService(
        AccountRepository repository.AccountRepository,
        StoreRepository repository.StoreRepository,
        TransactionRepository repository.TransactionRepository,
) *StoreTransactionService <span class="cov8" title="1">{
        return &amp;StoreTransactionService{
                AccountRepository:     AccountRepository,
                StoreRepository:       StoreRepository,
                TransactionRepository: TransactionRepository,
        }
}</span>

func (t *StoreTransactionService) RegisterStoreTransaction(fromAccountId string, storeId string, amount float64, currency string) (*entity.Transaction, error) <span class="cov8" title="1">{
        accountFrom, err := t.AccountRepository.Find(fromAccountId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">store, err := t.StoreRepository.FindStoreByIdAndStatus(storeId, entity.StoreActive)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = accountFrom.Withdow(amount)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := entity.NewTransaction(accountFrom, nil, nil, store, amount, currency)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = t.TransactionRepository.Register(transaction)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">err = t.AccountRepository.Save(accountFrom)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *StoreTransactionService) FindAllByStoreId(storeId string, pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        _, err := t.StoreRepository.Find(storeId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transactions, err := t.TransactionRepository.FindByStoreId(storeId, pag)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transactions, nil</span>
}
func (t *StoreTransactionService) FindOneByStore(storeId string, transactionId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        _, err := t.StoreRepository.Find(storeId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction, err := t.TransactionRepository.FindOneByStore(transactionId, storeId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transaction, nil</span>
}
</pre>

      <pre class="file" id="file3" style="display: none">package service

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/EdlanioJ/kbu/payments/domain/repository"
)

type TransactionService struct {
        TransactionRepository repository.TransactionRepository
}

func NewTransactionService(TransactionRepository repository.TransactionRepository) *TransactionService <span class="cov8" title="1">{

        return &amp;TransactionService{
                TransactionRepository: TransactionRepository,
        }

}</span>

func (t *TransactionService) Find(id string) (*entity.Transaction, error) <span class="cov8" title="1">{
        transaction, err := t.TransactionRepository.Find(id)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *TransactionService) FindAll(pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        transaction, err := t.TransactionRepository.FindAll(pag)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *TransactionService) Complete(transactionId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        transaction, err := t.TransactionRepository.Find(transactionId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">transaction.Status = entity.TransactionCompleted

        err = t.TransactionRepository.Save(transaction)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *TransactionService) Error(transactionId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        transaction, err := t.TransactionRepository.Find(transactionId)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">transaction.Status = entity.TransactionError

        err = t.TransactionRepository.Save(transaction)

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}
</pre>

      <pre class="file" id="file4" style="display: none">package repository

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/jinzhu/gorm"
)

type AccountRepositoryGORM struct {
        DB *gorm.DB
}

func (a *AccountRepositoryGORM) Find(id string) (*entity.Account, error) <span class="cov8" title="1">{
        account := &amp;entity.Account{}

        a.DB.First(account, "id = ?", id)

        if account.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no account was found")
        }</span>
        <span class="cov8" title="1">return account, nil</span>
}
func (a *AccountRepositoryGORM) Save(account *entity.Account) error <span class="cov8" title="1">{
        err := a.DB.Save(account).Error

        if err != nil </span><span class="cov8" title="1">{
                return errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return nil</span>
}
</pre>

      <pre class="file" id="file5" style="display: none">package repository

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/jinzhu/gorm"
)

type ServicePriceRepositoryGORM struct {
        DB *gorm.DB
}

func (s *ServicePriceRepositoryGORM) Find(id string) (*entity.ServicePrice, error) <span class="cov8" title="1">{
        servicePrice := &amp;entity.ServicePrice{}

        s.DB.First(servicePrice, "id = ?", id)

        if servicePrice.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no service price was found")
        }</span>

        <span class="cov8" title="1">return servicePrice, nil</span>
}
</pre>

      <pre class="file" id="file6" style="display: none">package repository

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/jinzhu/gorm"
)

type ServiceRepositoryGORM struct {
        DB *gorm.DB
}

func (s *ServiceRepositoryGORM) Find(id string) (*entity.Service, error) <span class="cov8" title="1">{
        service := &amp;entity.Service{}

        s.DB.First(service, "id = ?", id)

        if service.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no service was found")
        }</span>

        <span class="cov8" title="1">return service, nil</span>
}
func (s *ServiceRepositoryGORM) FindServiceByIdAndStatus(id string, status string) (*entity.Service, error) <span class="cov8" title="1">{
        service := &amp;entity.Service{}

        s.DB.First(service, "id = ? AND status = ?", id, status)

        if service.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no service was found")
        }</span>

        <span class="cov8" title="1">return service, nil</span>
}
</pre>

      <pre class="file" id="file7" style="display: none">package repository

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/jinzhu/gorm"
)

type StoreRepositoryGORM struct {
        DB *gorm.DB
}

func (s *StoreRepositoryGORM) Find(id string) (*entity.Store, error) <span class="cov8" title="1">{
        store := &amp;entity.Store{}

        s.DB.First(store, "id = ?", id)

        if store.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no service was found")
        }</span>
        <span class="cov8" title="1">return store, nil</span>
}
func (s *StoreRepositoryGORM) FindStoreByIdAndStatus(id string, status string) (*entity.Store, error) <span class="cov8" title="1">{
        store := &amp;entity.Store{}

        s.DB.First(store, "id = ? AND status = ?", id, status)

        if store.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no service was found")
        }</span>
        <span class="cov8" title="1">return store, nil</span>
}
</pre>

      <pre class="file" id="file8" style="display: none">package repository

import (
        "errors"

        "github.com/EdlanioJ/kbu/payments/domain/entity"
        "github.com/jinzhu/gorm"
)

type TransactionRepositoryGORM struct {
        DB *gorm.DB
}

func (t *TransactionRepositoryGORM) Register(transaction *entity.Transaction) error <span class="cov8" title="1">{
        err := t.DB.Omit("AccountFrom", "Service", "Store", "AccountTo").Create(transaction).Error

        if err != nil </span><span class="cov8" title="1">{
                return errors.New(err.Error())
        }</span>

        <span class="cov8" title="1">return nil</span>
}

func (t *TransactionRepositoryGORM) Save(transaction *entity.Transaction) error <span class="cov8" title="1">{
        err := t.DB.Omit("AccountFrom", "Service", "Store", "AccountTo").Save(transaction).Error

        if err != nil </span><span class="cov8" title="1">{
                return errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return nil</span>
}

func (t *TransactionRepositoryGORM) Find(id string) (*entity.Transaction, error) <span class="cov8" title="1">{
        transaction := &amp;entity.Transaction{}
        t.DB.First(transaction, "id = ?", id)

        if transaction.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no transaction was found")
        }</span>
        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *TransactionRepositoryGORM) FindOneByAccount(transactionId string, accountId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        transaction := &amp;entity.Transaction{}

        t.DB.First(transaction, "id = ? AND account_to_id = ?", transactionId, accountId)

        if transaction.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no transaction was found")
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *TransactionRepositoryGORM) FindOneByService(transactionId string, serviceId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        transaction := &amp;entity.Transaction{}

        t.DB.First(transaction, "id = ? AND service_id = ?", transactionId, serviceId)

        if transaction.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no transaction was found")
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *TransactionRepositoryGORM) FindOneByStore(transactionId string, storeId string) (*entity.Transaction, error) <span class="cov8" title="1">{
        transaction := &amp;entity.Transaction{}

        t.DB.First(transaction, "id = ? AND store_id = ?", transactionId, storeId)

        if transaction.ID == "" </span><span class="cov8" title="1">{
                return nil, errors.New("no transaction was found")
        }</span>

        <span class="cov8" title="1">return transaction, nil</span>
}

func (t *TransactionRepositoryGORM) FindAll(pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        var transactions []*entity.Transaction

        limit := 10
        var totalTransaction int
        sort := "updated_at DESC"
        err := t.DB.
                Offset((pag - 1) * limit).
                Limit(limit).
                Order(sort).
                Find(&amp;transactions).
                Count(&amp;totalTransaction).
                Error

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transactions, nil</span>
}

func (t *TransactionRepositoryGORM) FindByAccountFromId(accountId string, pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        var transactions []*entity.Transaction

        limit := 10
        var totalTransaction int
        sort := "updated_at DESC"

        err := t.DB.
                Where("account_from_id = ?", accountId).
                Offset((pag - 1) * limit).
                Limit(limit).
                Order(sort).
                Find(&amp;transactions).
                Count(&amp;totalTransaction).
                Error

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transactions, nil</span>
}

func (t *TransactionRepositoryGORM) FindByAccountToId(accountId string, pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        var transactions []*entity.Transaction

        limit := 10
        var totalTransaction int
        sort := "updated_at DESC"

        err := t.DB.
                Where("account_to_id = ?", accountId).
                Offset((pag - 1) * limit).
                Limit(limit).
                Order(sort).
                Find(&amp;transactions).
                Count(&amp;totalTransaction).
                Error

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transactions, nil</span>
}

func (t *TransactionRepositoryGORM) FindByServiceId(serviceId string, pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        var transactions []*entity.Transaction

        limit := 10
        var totalTransaction int
        sort := "updated_at DESC"

        err := t.DB.
                Where("service_id = ?", serviceId).
                Offset((pag - 1) * limit).
                Limit(limit).
                Order(sort).
                Find(&amp;transactions).
                Count(&amp;totalTransaction).
                Error

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transactions, nil</span>
}

func (t *TransactionRepositoryGORM) FindByStoreId(storeId string, pag int) ([]*entity.Transaction, error) <span class="cov8" title="1">{
        var transactions []*entity.Transaction

        limit := 10
        var totalTransaction int
        sort := "updated_at DESC"

        err := t.DB.
                Where("store_id = ?", storeId).
                Offset((pag - 1) * limit).
                Limit(limit).
                Order(sort).
                Find(&amp;transactions).
                Count(&amp;totalTransaction).
                Error

        if err != nil </span><span class="cov8" title="1">{
                return nil, errors.New(err.Error())
        }</span>
        <span class="cov8" title="1">return transactions, nil</span>
}
</pre>
    </div>
  </body>
  <script>
    (function () {
      var files = document.getElementById('files');
      var visible;
      files.addEventListener('change', onChange, false);
      function select(part) {
        if (visible) visible.style.display = 'none';
        visible = document.getElementById(part);
        if (!visible) return;
        files.value = part;
        visible.style.display = 'block';
        location.hash = part;
      }
      function onChange() {
        select(files.value);
        window.scrollTo(0, 0);
      }
      if (location.hash != '') {
        select(location.hash.substr(1));
      }
      if (!visible) {
        select('file0');
      }
    })();
  </script>
</html>
